---
title: NASËá™ÊâòÁÆ°ÈÉ®ÁΩ≤AIÁü•ËØÜÂ∫ì
tags: software
---

ÊàëÊÉ≥ÊääÁé∞Âú®ÁöÑÁõ∏ÂÖ≥Áü•ËØÜÈÉΩÂ°ûÂà∞Áü•ËØÜÂ∫ì‰∏≠ÔºåÁÑ∂ÂêéÁî®DeepSeekÊù•Êü•ËØ¢ÔºåÂπ∂‰∏îËß£ÊûêÂà∞Âõ∫ÂÆöÁöÑÊ†ºÂºèÈáå„ÄÇÁúã‰∫Ü‰∏Ä‰∏ãÁé∞Âú®ËÖæËÆØ„ÄÅÈòøÈáå„ÄÅÂ≠óËäÇÂÅöÂà∞Â§ßÊ®°ÂûãÂπ≥Âè∞ÈÉΩÊúâÁü•ËØÜÂ∫ìÁöÑÂäüËÉΩ„ÄÇ

‰ΩÜÊòØÔºåÂõ†‰∏∫Áü•ËØÜÂ∫ìÂæÄÂæÄÊ∂âÂèä‰∫ÜÁßÅÂØÜÊñá‰ª∂ÔºåÊúÄÂ•ΩËøòÊòØËøõË°åËá™ÊâòÁÆ°„ÄÇ

ü§™‰∏Ä‰∏™Á∫†ÁªìÁöÑÁÇπÊòØÔºåËôΩÁÑ∂ÊàëÂèØ‰ª•ÊääÊñá‰ª∂Êú¨Âú∞‰øùÂ≠òÔºå‰ΩÜÊàëÁöÑÁ°¨‰ª∂Ê≤°ÊúâÂèØËÉΩÈÉ®ÁΩ≤Êª°Ë°ÄÁöÑDeepSeekÔºåÊúÄÁªà‰ªçÁÑ∂‰ºö‰∏éÁ¨¨‰∏âÊñπÊúçÂä°Âô®ËøõË°åÊï∞ÊçÆ‰∫§Êç¢ü§™„ÄÇ

ÈÇ£‰πàÔºåÂ∞±ÂÖà‰∏çÁÆ°Ëøô‰∏™‰∫ã‰∫ÜÔºåÊØïÁ´ü‰ΩøÁî®Á∫ø‰∏äÂπ≥Âè∞ÔºåËøòÊòØÊúâ‰∏çÂ∞ëÈôêÂà∂ÁöÑÔºàËá™ÊàëÂÆâÊÖ∞Ôºâ„ÄÇ

## Âπ≥Âè∞ÈÄâÊã©

‰ºòÂÖàÈÄâÊã©ÂºÄÊ∫êÁöÑÂèØ‰ª•Ëá™ÊâòÁÆ°ÈÉ®ÁΩ≤ÁöÑÂπ≥Âè∞„ÄÇÊúÄÁªàÂÖ•Âõ¥ÁöÑÊòØ[Dify](https://dify.ai/)„ÄÅ[n8n](https://n8n.io/)„ÄÅ[FastGPT](https://tryfastgpt.ai/)„ÄÇËøô‰∏âËÄÖÈÉΩÊòØ‰ΩøÁî®‰∫ëÁ´ØÁâàÊî∂Ë¥πÔºàÊúâÂÖçË¥πÈôêÈ¢ùÊñπÊ°àÔºâÔºåÁÑ∂Âêé‰ΩøÁî®Á§æÂå∫ÁâàÂÖçË¥πÁöÑÊ®°Âºè„ÄÇ

ÊàëÈÉΩÂ∞ùËØï‰ΩøÁî®docker composeÈÉ®ÁΩ≤„ÄÇ


### Dify

DifyÂ∫îËØ•ÊòØÊúÄÂ§ö‰∫∫Áî®ÁöÑÔºàÔºüÔºâÔºå‰ΩÜÊòØÔºåÂÆòÊñπÊèê‰æõÁöÑ[docker-composeÊñá‰ª∂](https://github.com/langgenius/dify/blob/main/docker/docker-compose.yaml)ÂèàËá≠ÂèàÈïøÔºåÂÜÖÁΩÆ‰∫ÜÊØîËæÉÂ§öÁöÑÔºåÊàëÂèàÁî®‰∏ç‰∏äÁöÑÂäüËÉΩÔºàÊØîÊñπËØ¥nginxÔºåÁî®NASÁöÑ‰∏ÄËà¨ÈÉΩÊúâÔºå‰ºöÈÄöËøáËá™ÈÉ®ÁΩ≤ÁöÑÊñπÊ°àÁªü‰∏ÄÁÆ°ÁêÜÔºâÔºå‰ΩÜÊòØÊàë‰∏çÂ§™‰ºöÊîπ„ÄÇ

ÁÑ∂ÂêéÊúÄÁªàÊàëÊ≤°ÊúâÈÉ®ÁΩ≤ÊàêÂäü„ÄÇ


### n8n

ÈïúÂÉè‰ΩìÁßØÊØîËæÉÂ∞èÔºå[docker-compose](https://github.com/n8n-io/n8n-hosting/blob/main/docker-compose/withPostgres/docker-compose.yml)Ê∏ÖÊñ∞ÂæàÂ§ö„ÄÇ‰∏ãÈù¢ÊòØÊàëÈÉ®ÁΩ≤ÁöÑÊñá‰ª∂„ÄÇÊàëÊòØ‰∏∫‰∫Ü‰∏çÊãâÂèñÈïúÂÉèÂõ†Ê≠§Áî®‰∫Üpostgres 15ÔºåÂÆòÊñπÊòØ16„ÄÇ

n8nÊ≤°Êúâ‰∏≠ÊñáÔºåÁïåÈù¢ÂæàÁÆÄÂçïÔºåÂèØ‰ª•Â§çÂà∂ÂÖ∂‰ªñ‰∫∫ÁöÑjsonÂ∑•‰ΩúÊµÅÔºåÁõ¥Êé•Á≤òË¥¥Âà∞Ëá™Â∑±ÁöÑÂ∑•‰ΩúÊµÅÁîªÂ∏É‰∏≠„ÄÇ‰ΩÜÊòØÔºåÊ†πÊçÆÊâæÂà∞‰ø°ÊÅØÔºåËØ¥n8nÈúÄË¶ÅÊê≠ÈÖçÈ≠îÊ≥ïÁéØÂ¢ÉÔºåÊâç‰ºöÊõ¥Â•ΩÁî®„ÄÇ

```yaml
version: '3.8'

services:
  postgres:
    image: postgres:15
    container_name: n8n_postgres
    environment:
      POSTGRES_DB: postgres
      POSTGRES_USER: 
      POSTGRES_PASSWORD: 
      TZ: Asiz/Shanghai
    volumes:
      - ./postgres_data:/var/lib/postgresql/data
    networks:
      - n8n_network

  n8n:
    image: n8nio/n8n:1.80.0
    container_name: n8n
    environment:
      - DB_TYPE=postgresdb
      - DB_POSTGRESDB_DATABASE=postgres
      - DB_POSTGRESDB_HOST=postgres # ‰ΩøÁî®ÊúçÂä°Âêç‰Ωú‰∏∫‰∏ªÊú∫Âêç
      - DB_POSTGRESDB_PORT=5432
      - DB_POSTGRESDB_SCHEMA=public
      - DB_POSTGRESDB_USER=
      - DB_POSTGRESDB_PASSWORD=
      - GENERIC_TIMEZONE=Asia/Shanghai
      - N8N_ENCRYPTION_KEY=
      - N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
      - N8N_SECURE_COOKIE=false # ÂÖÅËÆ∏Èùûhttps
    ports:
      - "5678:5678"
    volumes:
      - ./n8n_data:/home/node/.n8n
    depends_on:
      - postgres
    networks:
      - n8n_network

volumes:
  postgres_data:
  n8n_data:

networks:
  n8n_network:
```

### FastGPT

ÊàëÈÉ®ÁΩ≤ÁöÑÊòØpgvectorÁöÑÁâàÊú¨„ÄÇËÄÅÂÆûËØ¥ÔºåÂÆòÊñπÊèê‰æõÁöÑ[docker-compose](https://github.com/labring/FastGPT/blob/main/files/docker/docker-compose-pgvector.yml)ÔºåÊàëÊ≤°ÊúâË∑ëÈÄö„ÄÇ

Êàë‰øÆÊîπ‰∫Ü‰∏Ä‰∏ãyamlÔºåÂèàÊääÁéØÂ¢ÉÂèòÈáèÊå™Âà∞.envÔºåÊÄªÁÆóË∑ëÈÄö‰∫Ü„ÄÇÂèØ‰ª•‰øÆÊîπfastgptÂíåopenapiÊö¥Èú≤Âú®Â§ñÈÉ®ÁöÑÁ´ØÂè£„ÄÇ

‰∏≠ÊñáÁïåÈù¢ÔºåÊúçÂä°Êèê‰æõÂïÜÁöÑÈÖçÁΩÆ‰πüÊØîËæÉÊ∏ÖÊô∞„ÄÇ‰ΩÜÊòØÁº∫Â∞ëÊñáÁîüÂõæÁöÑÈ¢ÑËÆæÈÖçÁΩÆÊ†ºÂºè„ÄÇ

ÊÄª‰ΩìÊù•ËØ¥‰πüÂ§üÁî®ÔºåÊàëÈ¢Ñ‰º∞‰ºöÁî®Ëøô‰∏™„ÄÇ

```yaml
version: '3.3'

services:
  # PostgreSQL Êï∞ÊçÆÂ∫ì
  pg:
    image: pgvector/pgvector:0.7.0-pg15
    container_name: pg
    restart: always
    networks:
      - fastgpt
    environment:
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${POSTGRES_DB}
    volumes:
      - ./pg/data:/var/lib/postgresql/data

  # MongoDB Êï∞ÊçÆÂ∫ì
  mongo:
    image: mongo:4.4.29      # CPU‰∏çÊîØÊåÅAVXÊåá‰ª§ÈõÜÔºåÁî®Ëøô‰∏™ÁâàÊú¨
    container_name: mongo
    restart: always
    networks:
      - fastgpt
    command: mongod --keyFile /data/mongodb.key --replSet rs0
    environment:
      MONGO_INITDB_ROOT_USERNAME: ${MONGO_USER}
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PASSWORD}
    volumes:
      - ./mongo/data:/data/db
    entrypoint:
      - bash
      - -c
      - |
        openssl rand -base64 128 > /data/mongodb.key
        chmod 400 /data/mongodb.key
        chown 999:999 /data/mongodb.key
        echo 'const isInited = rs.status().ok === 1
        if(!isInited){
          rs.initiate({
              _id: "rs0",
              members: [
                  { _id: 0, host: "mongo:27017" }
              ]
          })
        }' > /data/initReplicaSet.js
        exec docker-entrypoint.sh "$$@" &
        until mongo -u ${MONGO_USER} -p ${MONGO_PASSWORD} --authenticationDatabase admin --eval "print('waited for connection')" > /dev/null 2>&1; do
          echo "Waiting for MongoDB to start..."
          sleep 2
        done
        mongo -u ${MONGO_USER} -p ${MONGO_PASSWORD} --authenticationDatabase admin /data/initReplicaSet.js
        wait $$!

  # FastGPT Sandbox
  sandbox:
    container_name: sandbox
    image: ghcr.io/labring/fastgpt-sandbox:v4.8.22
    networks:
      - fastgpt
    restart: always

  # FastGPT ‰∏ªÊúçÂä°
  fastgpt:
    container_name: fastgpt
    image: ghcr.io/labring/fastgpt:v4.8.22
    ports:
      - 3000:3000
    networks:
      - fastgpt
    depends_on:
      - mongo
      - pg
      - sandbox
    restart: always
    environment:
      FE_DOMAIN: ${FE_DOMAIN}
      DEFAULT_ROOT_PSW: ${DEFAULT_ROOT_PSW}
      OPENAI_BASE_URL: http://oneapi:3000/v1
      CHAT_API_KEY: ${CHAT_API_KEY}
      DB_MAX_LINK: ${DB_MAX_LINK}
      TOKEN_KEY: ${TOKEN_KEY}
      ROOT_KEY: ${ROOT_KEY}
      FILE_TOKEN_KEY: ${FILE_TOKEN_KEY}
      MONGODB_URI: mongodb://${MONGO_USER}:${MONGO_PASSWORD}@mongo:27017/fastgpt?authSource=admin
      PG_URL: postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@pg:5432/${POSTGRES_DB}
      SANDBOX_URL: http://sandbox:3000
      LOG_LEVEL: info
      STORE_LOG_LEVEL: warn
      WORKFLOW_MAX_RUN_TIMES: ${WORKFLOW_MAX_RUN_TIMES}
      WORKFLOW_MAX_LOOP_TIMES: ${WORKFLOW_MAX_LOOP_TIMES}
      ALLOWED_ORIGINS: ${ALLOWED_ORIGINS}
      USE_IP_LIMIT: ${USE_IP_LIMIT}
    # volumes:
    #   - ./config.json:/app/data/config.json

  # MySQL Êï∞ÊçÆÂ∫ìÔºàÁî®‰∫é OneAPIÔºâ
  mysql:
    image: mysql:8.0.36
    container_name: mysql
    restart: always
    networks:
      - fastgpt
    command: --default-authentication-plugin=caching_sha2_password
    environment:
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
      MYSQL_DATABASE: oneapi
    volumes:
      - ./mysql:/var/lib/mysql

  # OneAPI ÊúçÂä°
  oneapi:
    container_name: oneapi
    image: ghcr.io/songquanpeng/one-api:v0.6.7
    ports:
      - 3001:3000
    depends_on:
      - mysql
    networks:
      - fastgpt
    restart: always
    environment:
      SQL_DSN: root:${MYSQL_ROOT_PASSWORD}@tcp(mysql:3306)/oneapi
      SESSION_SECRET: ${SESSION_SECRET}
      MEMORY_CACHE_ENABLED: true
      BATCH_UPDATE_ENABLED: true
      BATCH_UPDATE_INTERVAL: 10
      INITIAL_ROOT_TOKEN: ${INITIAL_ROOT_TOKEN}
    volumes:
      - ./oneapi:/data

networks:
  fastgpt:
```

‰∏ãÈù¢ÊòØÊàëÁöÑ.envÊñá‰ª∂

```bash
# PostgreSQL ÈÖçÁΩÆ
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_DB=postgres

# MongoDB ÈÖçÁΩÆ
MONGO_USER=
MONGO_PASSWORD=

# FastGPT ÈÖçÁΩÆ
FE_DOMAIN=
DEFAULT_ROOT_PSW=
CHAT_API_KEY=sk-fastgpt
DB_MAX_LINK=30
TOKEN_KEY=any
ROOT_KEY=root_key
FILE_TOKEN_KEY=
WORKFLOW_MAX_RUN_TIMES=1000
WORKFLOW_MAX_LOOP_TIMES=100
ALLOWED_ORIGINS=
USE_IP_LIMIT=false

# MySQL ÈÖçÁΩÆ
MYSQL_ROOT_PASSWORD=

# OneAPI ÈÖçÁΩÆ
SESSION_SECRET=
INITIAL_ROOT_TOKEN=
```
