---
title: Xamdst
tags: software
---

[Xamdst](https://github.com/pzweuj/xamdst) æ˜¯ç»å…¸æ¯”å¯¹ç»Ÿè®¡å·¥å…· [Bamdst](https://github.com/shiquan/bamdst) (v1.1.0) çš„ç°ä»£åŒ– Fork ç‰ˆæœ¬ã€‚

æœ¬é¡¹ç›®åœ¨ä¿ç•™åŸç‰ˆæ ¸å¿ƒåŠŸèƒ½çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡å¼•å…¥ HTSLib åº“å¹¶é‡æ„åº•å±‚æ¶æ„ï¼Œæ˜¾è‘—æå‡äº†å¤„ç†æ€§èƒ½ä¸æ–‡ä»¶æ ¼å¼å…¼å®¹æ€§ï¼Œä½¿å…¶æ›´èƒ½é€‚åº”ç°ä»£é«˜é€šé‡æµ‹åºæ•°æ®çš„åˆ†æéœ€æ±‚ã€‚

### ğŸš€ ä¸»è¦æ›´æ–°ç‰¹æ€§ (v2.0.0)

ç›¸æ¯”äºåŸç‰ˆ Bamdstï¼ŒXamdst å¸¦æ¥äº†ä»¥ä¸‹å…³é”®æ”¹è¿›ï¼š

1.  **åº•å±‚æ¶æ„ç°ä»£åŒ–**
    å¼ƒç”¨äº†è€æ—§çš„ [samlib](https://github.com/shiquan/bamdst/tree/master/samlib) æ¡†æ¶ï¼Œå…¨é¢è¿ç§»è‡³è¡Œä¸šæ ‡å‡†çš„ [HTSLib](https://github.com/samtools/htslib)ï¼Œæå‡äº†ç¨³å®šæ€§ä¸ç»´æŠ¤æ€§ã€‚

2.  **åŸç”Ÿå¤šçº¿ç¨‹æ”¯æŒ**
    å¾—ç›Šäº HTSLib çš„é›†æˆï¼Œç°å·²æ”¯æŒåŸç”Ÿå¤šçº¿ç¨‹è§£å‹ä¸è¯»å–ï¼Œå¤§å¹…æå‡åœ¨å¤§è§„æ¨¡æ•°æ®ä¸‹çš„è¿è¡Œé€Ÿåº¦ã€‚

3.  **å…¨é¢æ”¯æŒ CRAM æ ¼å¼**
    æ–°å¢å¯¹é«˜å‹ç¼©æ¯” CRAM æ–‡ä»¶çš„ç›´æ¥è¯»å–æ”¯æŒã€‚
    > **æ³¨æ„**ï¼šå¤„ç† CRAM æ–‡ä»¶æ—¶ï¼Œéœ€ä½¿ç”¨ `-T` å‚æ•°æŒ‡å®šå‚è€ƒåŸºå› ç»„æ–‡ä»¶ã€‚

4.  **æ–°å¢ç›¸å¯¹æ·±åº¦ç»Ÿè®¡æŒ‡æ ‡**
    åœ¨åŸæœ‰çš„ç»å¯¹æ·±åº¦ï¼ˆå¦‚ >10x, >30xï¼‰åŸºç¡€ä¸Šï¼Œæ–°å¢äº†åŸºäºå¹³å‡æ·±åº¦çš„æ¯”ä¾‹è¦†ç›–åº¦ç»Ÿè®¡ã€‚
    * ä¾‹å¦‚ï¼šç»Ÿè®¡è¦†ç›–åº¦è¾¾åˆ°å¹³å‡æ·±åº¦ 0.2 å€æˆ– 0.5 å€çš„åŒºåŸŸå æ¯”ã€‚

5.  **æœºå™¨å¯è¯»çš„ JSON æŠ¥å‘Š**
    æ–°å¢ JSON æ ¼å¼è¾“å‡ºï¼Œä¾¿äºä¸‹æ¸¸åˆ†ææµç¨‹ï¼ˆPipelineï¼‰ç›´æ¥è§£æä¸è´¨æ§æ•°æ®é›†æˆã€‚

---

### ğŸ“„ è¾“å‡ºç¤ºä¾‹ (JSON)

v2.0.0 ç‰ˆæœ¬ç”Ÿæˆçš„ JSON æŠ¥å‘ŠåŒ…å«è¯¦ç»†çš„è´¨æ§æŒ‡æ ‡ï¼Œæ¶µç›–æ¯”å¯¹ç»Ÿè®¡ã€æ’å…¥ç‰‡æ®µåˆ†å¸ƒã€Target åŒºåŸŸåŠ Flanking åŒºåŸŸè¦†ç›–åº¦ç­‰ä¿¡æ¯ï¼š

```json
{
  "version": "2.0.0",
  "files": ["02.Alignment/test.marked.cram"],
  "total": {
    "raw_reads": 4916994,
    "qc_fail_reads": 0,
    "raw_data_mb": 729.93,
    "paired_reads": 4916994,
    "mapped_reads": 4916790,
    "mapped_reads_fraction": 100.00,
    "mapped_data_mb": 729.92,
    "mapped_data_fraction": 100.00,
    "properly_paired": 4855432,
    "properly_paired_fraction": 98.75,
    "read_mate_paired": 4916690,
    "read_mate_paired_fraction": 99.99,
    "singletons": 100,
    "diff_chr": 15204,
    "read1": 2458497,
    "read2": 2458497,
    "read1_rmdup": 2200254,
    "read2_rmdup": 2200199,
    "forward_strand": 2458456,
    "backward_strand": 2458334,
    "pcr_duplicates": 516337,
    "pcr_duplicates_fraction": 10.50,
    "mapq_cutoff": 20,
    "mapq_reads": 4566427,
    "mapq_reads_fraction_all": 92.87,
    "mapq_reads_fraction_mapped": 92.87
  },
  "insert_size": {
    "average": 260.29,
    "median": 253
  },
  "target": {
    "target_reads": 3746965,
    "target_reads_fraction_all": 76.20,
    "target_reads_fraction_mapped": 76.21,
    "target_data_mb": 401.34,
    "target_data_rmdup_mb": 330.06,
    "target_data_fraction_all": 54.98,
    "target_data_fraction_mapped": 54.98,
    "region_length": 49735982,
    "average_depth": 8.07,
    "average_depth_rmdup": 6.64,
    "coverage": {
      "gt_0x": 84.22,
      "gte_4x": 68.70,
      "gte_10x": 32.79,
      "gte_30x": 1.68,
      "gte_100x": 0.12,
      "gt_0_2_avg": 84.22,
      "gt_0_5_avg": 68.70,
      "ratio_based": {
        "gt_0.2_avg": 79.90,
        "gt_0.5_avg": 62.38
      }
    },
    "coverage_rmdup": {
      "gt_0x": 82.42,
      "gte_4x": 64.78,
      "gte_10x": 25.87,
      "gte_30x": 0.69,
      "gte_100x": 0.02
    },
    "region_count": 238982,
    "region_coverage": {
      "gt_0x_count": 200958,
      "gt_0x_fraction": 84.09,
      "gte_4x_fraction": 64.93,
      "gte_10x_fraction": 24.81,
      "gte_30x_fraction": 0.95,
      "gte_100x_fraction": 0.03
    }
  },
  "flank": {
    "flank_size": 200,
    "region_length": 126297494,
    "average_depth": 4.88,
    "flank_reads": 4238766,
    "flank_reads_fraction_all": 86.21,
    "flank_reads_fraction_mapped": 86.21,
    "flank_data_mb": 616.65,
    "flank_data_fraction_all": 84.48,
    "flank_data_fraction_mapped": 84.48,
    "coverage": {
      "gt_0x": 72.65,
      "gte_4x": 43.44,
      "gte_10x": 16.76,
      "gte_30x": 0.81,
      "gte_100x": 0.05
    }
  }
}

```

### ğŸ› ï¸ å®‰è£…ä¸éƒ¨ç½²

Xamdst æä¾›äº†æºç ç¼–è¯‘å’Œ Docker é•œåƒä¸¤ç§éƒ¨ç½²æ–¹å¼ã€‚

#### 1. ç¯å¢ƒä¾èµ– (Dependencies)
åœ¨ç¼–è¯‘æºç å‰ï¼Œè¯·ç¡®ä¿ç³»ç»Ÿä¸­å·²å®‰è£…ä»¥ä¸‹åŸºç¡€åº“ï¼š
* **htslib**: ç”¨äº BAM/CRAM/SAM æ–‡ä»¶çš„æ ¸å¿ƒè¯»å†™æ”¯æŒ
* **zlib**: ç”¨äºæ•°æ®å‹ç¼©æ”¯æŒ
* **pthread**: ç”¨äºå¤šçº¿ç¨‹æ”¯æŒ

**Debian/Ubuntu:**
```bash
apt-get update
apt-get install libhts-dev zlib1g-dev
```

#### 2. æºç ç¼–è¯‘(Build from Source)

```bash
git clone https://github.com/pzweuj/xamdst.git
cd xamdst
make
```

#### 3. Docker éƒ¨ç½²

å¦‚æœæ‚¨å¸Œæœ›å¿«é€Ÿä½“éªŒæˆ–é›†æˆåˆ°äº‘æµç¨‹ä¸­ï¼Œå¯ä»¥ç›´æ¥æ‹‰å–åŒ…å« Xamdst çš„é•œåƒï¼š

```bash
docker pull ghcr.io/pzweuj/mapping:2026Jan
```
